# 사주 상담 앱 기능 업그레이드 프롬프트

## 📋 프로젝트 개요

기존 상담 앱에 **사주팔자 분석 기능**을 추가합니다. 무료 버전과 프리미엄(유료) 버전 두 가지를 제공합니다.

---

## 🆓 무료 버전 기능 명세

### 1. 입력 정보
```
- 이름
- 성별 (남성/여성)
- 생년월일 (YYYY-MM-DD, 양력/음력 선택)
- 태어난 시간 (선택사항, 모름 가능)
```

### 2. 사주 기본 분석 (무료)

#### 2.1 사주 구성 표시
- 년주, 월주, 일주, 시주 (시간 입력 시)
- 각 기둥의 천간과 지지 표시
- 십신(十神) 관계 표시 (본인, 비견, 겁재, 식신, 상관, 편재, 정재, 편관, 정관, 편인, 정인)

#### 2.2 일주(日柱) 분석
```javascript
// 60갑자 일주별 상징과 키워드 데이터 필요
const ilju_data = {
  "을사": {
    symbol: "불꽃 옆의 덩굴",
    description: "지혜와 열정 사이에서 균형을 찾는 사람",
    nature_image: "따뜻한 불 곁에서 자라는 담쟁이",
    personality: "적응력이 뛰어나고 기회를 잘 포착합니다",
    life_theme: "지혜롭게 기회를 잡고, 유연하게 성공을 이루는 삶"
  },
  // ... 60개 일주 데이터
}
```

#### 2.3 일간(日干) 성향 분석
```javascript
// 10개 천간별 성향
const ilgan_data = {
  "갑": { element: "목", yin_yang: "양", symbol: "큰 나무", keywords: ["리더십", "진취성", "독립심"] },
  "을": { element: "목", yin_yang: "음", symbol: "풀, 덩굴, 꽃", keywords: ["적응력", "섬세함", "인내", "조화"] },
  "병": { element: "화", yin_yang: "양", symbol: "태양", keywords: ["열정", "표현력", "사교성"] },
  "정": { element: "화", yin_yang: "음", symbol: "촛불", keywords: ["따뜻함", "섬세함", "예술성"] },
  "무": { element: "토", yin_yang: "양", symbol: "산", keywords: ["신뢰", "안정", "중재"] },
  "기": { element: "토", yin_yang: "음", symbol: "논밭", keywords: ["포용", "수용", "실용"] },
  "경": { element: "금", yin_yang: "양", symbol: "철", keywords: ["결단력", "의지", "정의"] },
  "신": { element: "금", yin_yang: "음", symbol: "보석", keywords: ["정교함", "예리함", "미적감각"] },
  "임": { element: "수", yin_yang: "양", symbol: "바다", keywords: ["지혜", "포용", "유연"] },
  "계": { element: "수", yin_yang: "음", symbol: "비, 이슬", keywords: ["직관", "감수성", "적응"] }
}
```

#### 2.4 오행(五行) 밸런스 분석
```
- 목(木), 화(火), 토(土), 금(金), 수(水) 분포 계산
- 시각적 차트 (레이더 차트 또는 막대 그래프)
- 가장 강한 기운 / 부족한 기운 표시
```

#### 2.5 용신(用神) 분석
```
- 용신: 가장 필요한 기운
- 희신: 용신을 도와주는 기운
- 한신: 중립적인 기운
- 기신: 주의해야 할 기운
- 구신: 피해야 할 기운
```

#### 2.6 필요한 기운 보충 가이드
```javascript
const element_guide = {
  "화": {
    direction: "남쪽",
    season: "여름",
    lucky_number: [2, 7],
    colors: ["빨간색", "주황색", "보라색", "분홍색"],
    foods: ["쓴맛 음식", "붉은 과일", "토마토", "고추", "석류", "커피"],
    activities: ["운동", "춤", "노래", "발표", "토론", "사교 모임"],
    jobs: ["연예", "마케팅", "광고", "요리", "미용", "방송"]
  },
  // ... 5개 오행 데이터
}
```

#### 2.7 십신(十神) 분석
```
- 비겁(자기 주도력): 비견 + 겁재
- 식상(표현력/창의력): 식신 + 상관
- 재성(현실 감각): 편재 + 정재
- 관성(책임감/리더십): 편관 + 정관
- 인성(학습/안정 추구): 편인 + 정인
- 시각적 방사형 차트로 표현
```

#### 2.8 올해 운세 개요
```
- 현재 대운 표시
- 올해 연운 간단 분석
- 운세 등급 (좋음/보통/주의)
```

---

## 💎 프리미엄(유료) 버전 추가 기능

### 3. 심화 분석

#### 3.1 격국(格局) 분석
```javascript
// 8가지 정격 + 특수격
const format_types = {
  정인격: { description: "학문과 교육에 재능, 보호 본능", jobs: ["교사", "연구원", "작가", "상담사"] },
  편인격: { description: "독창성과 영감, 비범한 사고", jobs: ["예술가", "발명가", "점술가"] },
  정관격: { description: "명예와 책임, 사회적 성취", jobs: ["공무원", "관리자", "법조인"] },
  편관격: { description: "도전과 성취, 승부사 기질", jobs: ["군인", "경찰", "운동선수"] },
  정재격: { description: "안정적 재물, 성실함", jobs: ["회계사", "금융업", "사업가"] },
  편재격: { description: "활동적 재물, 사교적", jobs: ["영업", "투자", "유통업"] },
  식신격: { description: "창의력과 표현, 먹는 복", jobs: ["요리사", "예술가", "교육자"] },
  상관격: { description: "날카로운 통찰, 혁신", jobs: ["작가", "변호사", "컨설턴트"] }
}
```

#### 3.2 인간관계 패턴 분석
```
- 독립형 / 협력형 / 보호형 / 추진형 등
- 잘 맞는 관계 유형
- 관계에서 주의할 점
```

#### 3.3 직업 적성 심화 분석
```
- 창작/예술형, 분석/연구형, 관리/조직형, 사업/거래형 등
- 추천 직업 리스트
- 업무 스타일 분석
- 성공 TIP
```

#### 3.4 재물운 심화 분석
```
- 재물 유형 (안정형/투자형/창의형/관직형)
- 돈을 버는 방식
- 재물 관리 조언
```

#### 3.5 건강 체질 분석
```javascript
// 오행별 건강 관련 장기
const health_elements = {
  목: { organs: ["간", "담"], weak_symptoms: ["눈 피로", "근육 경련", "화를 잘 냄"] },
  화: { organs: ["심장", "소장"], weak_symptoms: ["불면", "심장 두근거림", "열감"] },
  토: { organs: ["비장", "위"], weak_symptoms: ["소화불량", "무기력", "걱정이 많음"] },
  금: { organs: ["폐", "대장"], weak_symptoms: ["잦은 감기", "피부 트러블", "변비"] },
  수: { organs: ["신장", "방광"], weak_symptoms: ["요통", "부종", "두려움이 많음"] }
}
```

#### 3.6 조후(調候) 분석
```
- 태어난 계절에 따른 조절 필요 기운
- 계절별 보완 활동 추천
```

#### 3.7 신살(神殺) 분석
```javascript
// 주요 신살
const special_stars = {
  길신: ["천을귀인", "월덕귀인", "문창귀인", "역마", "화개"],
  흉신: ["도화", "백호", "양인", "공망", "원진"]
}
```

#### 3.8 비슷한 사주 유명인 매칭
```
- 같은 일주 유명인
- 유사한 사주 구성 유명인
- 유사도 점수 계산
```

### 4. 대운/연운 상세 분석 (프리미엄)

#### 4.1 대운(大運) 타임라인
```
- 10년 단위 대운 전체 표시
- 각 대운별 용신 관계 (길/흉 표시)
- 황금기(용신 대운) 표시
- 현재 대운 상세 해석
```

#### 4.2 연운(年運) 상세
```
- 향후 10년 연운 그래프
- 각 해별 점수 (0-100점)
- 최고의 해 / 주의할 해 표시
- 연도별 키워드 (행운의 해, 변화의 해, 인연의 해 등)
```

#### 4.3 분야별 시기 운세
```
- 취업/직장운
- 연애/결혼운
- 승진/성취운
- 재물운
- 학업/자격증운
- 건강운
```

#### 4.4 인생 단계 분석
```
- 현재 인생 단계 (씨앗기/성장기/꽃피는 시기/결실기 등)
- 이 시기의 과제와 기회
- 넘어야 할 도전
- 시기별 조언
```

### 5. 기둥별 상세 해석 (프리미엄)

```
- 년주: 조상운, 유년기(1~15세), 사회적 이미지
- 월주: 부모운, 청년기(16~30세), 직업/학업
- 일주: 본인, 중년기(31~45세), 배우자
- 시주: 자녀운, 말년(46세~), 성취
```

---

## 💑 궁합 분석 기능

### 6. 무료 궁합

#### 6.1 입력 정보
```
- 본인: 이름, 성별, 생년월일, 시간(선택)
- 상대방: 이름, 성별, 생년월일, 시간(선택)
```

#### 6.2 기본 궁합 분석
```
- 두 사람의 일주 상징 비교
- 일간(日干) 십성 관계 분석
- 궁합 점수 (0-100점)
- 한 줄 총평
```

### 7. 프리미엄 궁합

#### 7.1 배우자궁 분석
```
- 각자의 일지(日支)와 상대방 일간의 관계
- 배우자궁에 상대방이 들어왔을 때의 의미
```

#### 7.2 십성 관계 상세
```javascript
const relationship_types = {
  비견: { compatibility: "중", description: "동등한 파트너, 친구 같은 관계" },
  겁재: { compatibility: "중하", description: "경쟁과 자극이 있는 관계" },
  식신: { compatibility: "상", description: "돌봄을 주는 관계" },
  상관: { compatibility: "중하", description: "자극적이고 표현적인 관계" },
  편재: { compatibility: "상", description: "활발하고 현실적인 관계" },
  정재: { compatibility: "상", description: "안정적이고 헌신적인 관계" },
  편관: { compatibility: "중", description: "긴장과 성장이 있는 관계" },
  정관: { compatibility: "상", description: "존경과 책임의 관계" },
  편인: { compatibility: "중", description: "독특하고 영감을 주는 관계" },
  정인: { compatibility: "상", description: "지지와 보호의 관계" }
}
```

#### 7.3 지지(地支) 관계 분석
```javascript
// 합(合), 충(沖), 형(刑), 해(害), 파(破)
const branch_relations = {
  육합: { pairs: ["자축", "인해", "묘술", "진유", "사신", "오미"], effect: "조화로운 관계" },
  삼합: { groups: ["인오술(화)", "해묘미(목)", "신자진(수)", "사유축(금)"], effect: "강한 결속" },
  방합: { groups: ["인묘진(목)", "사오미(화)", "신유술(금)", "해자축(수)"], effect: "같은 방향" },
  충: { pairs: ["자오", "축미", "인신", "묘유", "진술", "사해"], effect: "갈등 요소" },
  형: { types: ["인사신(무은형)", "축술미(지세형)", "자묘(무례형)"], effect: "마찰 가능" }
}
```

#### 7.4 오행 보완 분석
```
- 서로의 부족한 오행을 채워주는지
- 상생/상극 관계
- 함께 있을 때의 에너지 변화
```

#### 7.5 대운 흐름 비교
```
- 두 사람의 대운 타임라인 비교
- 황금기가 겹치는 시기
- 함께 주의해야 할 시기
```

#### 7.6 함께 하면 좋은 활동
```
- 각자의 보완 오행 기반
- 공통으로 좋은 활동 추천
```

---

## 🛠️ 기술 구현 사항

### 8. 만세력 계산 엔진

```javascript
// 필요한 핵심 계산 함수들
class SajuCalculator {
  // 양력-음력 변환
  solarToLunar(year, month, day) {}
  
  // 년주 계산
  getYearPillar(year, isLunar) {}
  
  // 월주 계산 (절기 기준)
  getMonthPillar(year, month, day) {}
  
  // 일주 계산 (60갑자)
  getDayPillar(year, month, day) {}
  
  // 시주 계산
  getHourPillar(dayGan, hour) {}
  
  // 오행 점수 계산
  calculateFiveElements(pillars) {}
  
  // 십신 계산
  calculateTenGods(dayGan, targetGan) {}
  
  // 용신 판단
  determineYongShin(fiveElements, dayGan, monthBranch) {}
  
  // 대운 계산
  calculateDaeUn(gender, yearGan, monthPillar, birthDate) {}
  
  // 연운 계산
  calculateYearUn(targetYear) {}
  
  // 격국 판단
  determineFormat(monthBranch, dayGan) {}
  
  // 신살 계산
  calculateSpecialStars(pillars) {}
}
```

### 9. 데이터베이스 구조

```javascript
// 유명인 사주 데이터
const celebrities_db = {
  id: String,
  name: String,
  profession: String,
  birthDate: Date,
  zodiac: String,  // 띠
  dayPillar: String,  // 일주
  monthPillar: String,
  yearPillar: String,
  fiveElements: Object  // 오행 분포
}

// 사용자 분석 기록
const user_analysis = {
  userId: String,
  analysisDate: Date,
  inputData: Object,
  sajuData: Object,
  isPremium: Boolean
}
```

### 10. UI/UX 요구사항

```
- 사주 입력 폼: 직관적인 날짜/시간 선택기
- 결과 화면: 섹션별 카드 레이아웃
- 시각화: 오행 차트, 대운 그래프, 연운 타임라인
- 색상 테마: 오행별 색상 적용
  - 목: 초록색 계열
  - 화: 빨간색 계열
  - 토: 노란색/갈색 계열
  - 금: 흰색/금색 계열
  - 수: 파란색/검정색 계열
- 결과 공유: 이미지로 저장 기능
- 반응형 디자인
```

---

## 📌 개발 우선순위

### Phase 1 (무료 버전 핵심)
1. 만세력 계산 엔진 구현
2. 사주 구성 표시 (년월일시주)
3. 일주/일간 기본 분석
4. 오행 밸런스 차트
5. 용신 분석
6. 필요한 기운 가이드

### Phase 2 (무료 버전 확장)
7. 십신 분석
8. 올해 운세 개요
9. 기본 궁합 분석

### Phase 3 (프리미엄 기능)
10. 격국 분석
11. 대운/연운 상세 분석
12. 건강/재물/직업 심화
13. 신살 분석
14. 유명인 매칭

### Phase 4 (프리미엄 궁합)
15. 배우자궁 분석
16. 지지 관계 상세
17. 오행 보완 분석
18. 대운 비교

---

## 📝 참고 사항

- 사주 분석의 전통적 이론을 최대한 존중하되, 현대적이고 긍정적인 해석 제공
- 운세는 절대적인 것이 아닌 참고 자료임을 명시
- 부정적인 내용도 건설적인 조언으로 전환
- "시간 모름" 선택 시 시주 제외하고 삼주 기준 분석
- 음력 생일 입력 시 정확한 양력 변환 필요
